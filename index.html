<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta
			http-equiv="X-UA-Compatible"
			content="IE=edge" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1.0" />
		<title>Signature Sound Game | thisjt.me</title>
		<style>
			* {
				box-sizing: border-box;
			}
			body {
				margin: 0;
				padding: 0;
				font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
				background-color: #2c2c2c;
				font-size: 200%;
				color: #eee;
			}
			.playercontainer,
			.header {
				overflow: hidden;
				text-align: center;
			}
			.header {
				word-wrap: break-word;
			}

			.header,
			.playlist,
			.playercontainer,
			.controls {
				max-width: 1000px;
				margin: 0.5rem auto;
				padding: 1rem;
				background-color: #343434;
			}
			.header sup {
				color: #535353;
			}

			.playercontainer {
				display: flex;
			}
			.playercontainer iframe {
				width: 100%;
			}

			.playlist input[type='text'] {
				font-size: 80%;
				background-color: transparent;
				border: 2px solid #aaa;
				color: inherit;
				padding: 10px;
				margin-bottom: 10px;
				max-width: 100%;
			}
			.playlist input[type='submit'] {
				font-size: 80%;
				background-color: transparent;
				border: 2px solid #aaa;
				color: inherit;
				padding: 10px 20px;
			}

			.controls {
				display: flex;
				justify-content: center;
				flex-wrap: wrap;
			}
			.controls button {
				padding: 10px 10px;
				font-size: 80%;
				background-color: transparent;
				border: 2px solid #aaa;
				color: inherit;
				display: flex;
				align-items: center;
				margin: 10px;
			}
			.controls button img {
				margin-left: 5px;
			}

			.shroud {
				position: absolute;
				background-color: #000;
				display: flex;
				align-items: center;
				justify-content: center;
			}
		</style>
	</head>
	<body>
		<div class="header">Signature Sound Quiz <sup>by&nbsp;thisjt</sup></div>
		<div class="playercontainer">
			<iframe
				id="ytplayer"
				type="text/html"
				width="420"
				height="270"
				src="https://www.youtube.com/embed/?listType=playlist&list=PL9RiXq3CWn9rA8MIu14yONp2ufqkvrrJd&enablejsapi=1&autoplay=0&mute=1"
				frameborder="0"></iframe>
			<div
				class="shroud"
				id="shroud">
				Hidden
			</div>
		</div>
		<div class="controls">
			<button id="playvideo">20s <img src="./res/play.png" /></button>
			<button id="playvideonow">Seeker <img src="./res/play.png" /></button>
			<button id="nextsong">Next <img src="./res/next-button.png" /></button>
			<button id="showshroud">
				<img src="./res/view.png" />
			</button>
			<button
				id="hideshroud"
				style="display: none">
				<img src="./res/hide.png" />
			</button>
		</div>
		<div class="playlist">
			<input
				type="text"
				id="playlistloader" />
			<input
				type="submit"
				id="playlistloaderbutton"
				value="Load Playlist ID" />
		</div>

		<script>
			// 2. This code loads the IFrame Player API code asynchronously.
			var tag = document.createElement('script');
			var player;
			var played = false;

			tag.src = 'https://www.youtube.com/iframe_api';
			var firstScriptTag = document.getElementsByTagName('script')[0];
			firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

			function onYouTubeIframeAPIReady() {
				player = new YT.Player('ytplayer', {
					playerVars: {
						autoplay: 0,
					},
					events: {
						onReady: onPlayerReady,
					},
				});
			}

			function onPlayerReady() {
				player.mute();
				const playerelement = document.querySelector('#ytplayer');
				document.querySelector('.shroud').setAttribute('style', `width:${playerelement.offsetWidth}px;height:${playerelement.offsetHeight * 0.7}px;`);
			}

			playvideo.addEventListener('click', () => {
				player.seekTo(20, true);
				player.unMute();
				player.playVideo();
				setTimeout(() => {
					player.pauseVideo();
					player.mute();
				}, 3000);
			});

			playvideonow.addEventListener('click', () => {
				player.unMute();
				player.playVideo();
				setTimeout(() => {
					player.pauseVideo();
					player.mute();
				}, 3000);
			});

			nextsong.addEventListener('click', () => {
				player.mute();
				player.setShuffle(true);
				player.nextVideo();
				player.pauseVideo();
			});

			playlistloaderbutton.addEventListener('click', () => {
				const playliststring = playlistloader.value;
				player.loadPlaylist(playliststring);
			});

			showshroud.addEventListener('click', () => {
				hideshroud.setAttribute('style', '');
				showshroud.setAttribute('style', 'display:none');
				shroud.style.display = 'none';
			});

			hideshroud.addEventListener('click', () => {
				showshroud.setAttribute('style', '');
				hideshroud.setAttribute('style', 'display:none');
				shroud.style.display = '';
			});
		</script>
	</body>
</html>
